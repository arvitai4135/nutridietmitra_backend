CREATE TYPE userrole AS ENUM ('admin', 'user');
CREATE TYPE userstatus AS ENUM ('active', 'inactive');

CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    full_name VARCHAR(100) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    phone_number VARCHAR(15) UNIQUE,
    password VARCHAR(255) NOT NULL,
    role userrole NOT NULL,
    profile_path VARCHAR(255) DEFAULT 'default.jpg',
    status userstatus DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT users_updated_at_check CHECK (updated_at >= created_at)
);

CREATE INDEX idx_users_email ON users (email);
CREATE INDEX idx_users_phone_number ON users (phone_number);




CREATE TYPE appointmentstatus AS ENUM ('active', 'inactive');

CREATE TABLE appointments (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(255) NOT NULL,
    mobile_number VARCHAR(15) NOT NULL,
    medical_issue TEXT NOT NULL,
    message TEXT,
    status appointmentstatus DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT appointments_updated_at_check CHECK (updated_at >= created_at)
);

CREATE INDEX idx_appointments_email ON appointments (email);
CREATE INDEX idx_appointments_mobile_number ON appointments (mobile_number);
